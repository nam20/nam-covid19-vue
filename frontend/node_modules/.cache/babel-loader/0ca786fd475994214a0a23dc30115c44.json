{"remainingRequest":"C:\\projects\\nam-lol\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\projects\\nam-lol\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\projects\\nam-lol\\frontend\\src\\store\\user.js","dependencies":[{"path":"C:\\projects\\nam-lol\\frontend\\src\\store\\user.js","mtime":1596533349557},{"path":"C:\\projects\\nam-lol\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\projects\\nam-lol\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\projects\\nam-lol\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovcHJvamVjdHMvbmFtLWxvbC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IEF4aW9zIGZyb20gImF4aW9zIjsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBtZTogJycKICB9Owp9OwoKdmFyIG11dGF0aW9ucyA9IHsKICBzZXRNZTogZnVuY3Rpb24gc2V0TWUoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLm1lID0gcGF5bG9hZDsKICAgIGNvbnNvbGUubG9nKHN0YXRlLm1lKTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvYWRVc2VyOiBmdW5jdGlvbiBsb2FkVXNlcihfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICBheGlvcy5wb3N0KCIvdXNlciIpLnRoZW4oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKICAgICAgaWYgKF90eXBlb2YoZGF0YSkgPT09ICdvYmplY3QnKSBjb21taXQoJ3NldE1lJywgZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgIH0pOwogIH0sCiAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKF9yZWYzLCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgYXhpb3MucG9zdCgnL3VzZXIvcmVnaXN0ZXInLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICB2YXIgZGF0YSA9IF9yZWY0LmRhdGE7CgogICAgICBpZiAoIWRhdGEuZmFpbCkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIGRhdGEudG9rZW4pOwogICAgICAgIGNvbW1pdCgnc2V0TWUnLCBkYXRhLnVzZXIpOwogICAgICB9IGVsc2UgYWxlcnQoZGF0YS5mYWlsKTsgLy8gYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHtkYXRhLnRva2VufWAKCiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZSk7CiAgICB9KTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmNSwgcGF5bG9hZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIGF4aW9zLnBvc3QoJy91c2VyL2xvZ2luJywgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmNi5kYXRhOwoKICAgICAgaWYgKCFkYXRhLmZhaWwpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCBkYXRhLnRva2VuKTsKICAgICAgICBjb21taXQoJ3NldE1lJywgZGF0YS51c2VyKTsKICAgICAgfSBlbHNlIGFsZXJ0KGRhdGEuZmFpbCk7CgogICAgICBjb25zb2xlLmxvZyhkYXRhKTsgLy9heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke2RhdGEudG9rZW59YAogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UpOwogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmNykgewogICAgdmFyIGNvbW1pdCA9IF9yZWY3LmNvbW1pdDsKICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2UudG9rZW47IC8vYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHVuZGVmaW5lZAoKICAgIGNvbW1pdCgnc2V0TWUnLCAnJyk7CiAgfSwKICBjaGFuZ2VOaWNrbmFtZTogZnVuY3Rpb24gY2hhbmdlTmlja25hbWUoX3JlZjgsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmOC5jb21taXQ7CiAgICBheGlvcy5wb3N0KCd1c2VyL25pY2tuYW1lJywgewogICAgICBuaWNrbmFtZTogcGF5bG9hZC5uaWNrbmFtZQogICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIGNvbW1pdCgnY2hhbmdlTmlja25hbWUnLCBwYXlsb2FkKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["C:/projects/nam-lol/frontend/src/store/user.js"],"names":["Axios","state","me","mutations","setMe","payload","console","log","actions","loadUser","commit","axios","post","then","data","catch","err","error","register","fail","localStorage","setItem","token","user","alert","response","login","logout","changeNickname","nickname","namespaced"],"mappings":"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","sourcesContent":["import Axios from \"axios\"\r\n\r\n\r\nconst state = () => ({\r\n    me : ''\r\n})\r\n\r\nconst mutations = {\r\n    setMe(state,payload){\r\n        state.me = payload\r\n        console.log(state.me)\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    loadUser({commit}){\r\n        axios.post(`/user`)\r\n        .then(({data})=>{\r\n            if(typeof data === 'object') commit('setMe',data)\r\n        })\r\n        .catch(err=>{\r\n            console.error(err)\r\n        })\r\n    },\r\n\r\n    register({commit},payload){\r\n        axios.post('/user/register',payload)\r\n        .then(({data})=>{\r\n            if(! data.fail){\r\n                localStorage.setItem(\"token\",data.token);\r\n                commit('setMe',data.user)\r\n            }\r\n            else alert(data.fail)\r\n            // axios.defaults.headers.common['Authorization'] = `Bearer ${data.token}`\r\n        })\r\n        .catch(err=>{\r\n            console.log(err.response)\r\n        })\r\n    },\r\n    login({commit},payload){\r\n\r\n        axios.post('/user/login',payload)\r\n        .then(({data})=>{\r\n            if(! data.fail){\r\n                localStorage.setItem(\"token\",data.token);\r\n                commit('setMe',data.user)\r\n\r\n            }\r\n            else alert(data.fail)\r\n\r\n            console.log(data)\r\n            //axios.defaults.headers.common['Authorization'] = `Bearer ${data.token}`\r\n        })\r\n        .catch(err=>{\r\n            console.log(err.response)\r\n        })\r\n    },\r\n    logout({commit}){\r\n        delete localStorage.token\r\n        //axios.defaults.headers.common['Authorization'] = undefined\r\n        commit('setMe','')\r\n    },\r\n    changeNickname({commit},payload){\r\n        axios.post('user/nickname',{\r\n            nickname:payload.nickname\r\n        })\r\n        .then(()=>{\r\n            commit('changeNickname',payload)\r\n        })\r\n        .catch(err=>{\r\n            console.error(err)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport default {\r\n    namespaced:true,\r\n    state,mutations,actions\r\n}"]}]}